<%= form_with(model:[@lecture, @review]) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>

  <div class="form-group" id="score">
    <%= f.label :score, t('.satisfaction'), class:'' %>
    <br>
    <%= f.hidden_field :score, id: :review_score %>
  </div>
  <div class="review-form-post">
    <%= f.submit yield(:button_text), class: "btn btn-primary" %>
  </div>    


  <%= f.label :content %>
  <%= f.text_area :content, size: "20x10", maxlength: "600", class: 'form-control' %>
  <small><%= t('.example_1')%></small><br>


  <%= f.hidden_field :lecture_id, value: @lecture.id %>



  <!-- 評価javascript -->
  <script>
  $('#score').raty({
    size     : 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    <% unless @review.score == nil %>
      score: <%= @review.score %>,
    <% end %>
    scoreName: 'review[score]',
    half: false,
  });

  // var star1 = document.querySelector('#score img'); これ下の二行と同じ意味
  let starparent = document.querySelector('#score');
  let btn = document.querySelector('.btn-primary');
  let star1 = starparent.querySelector('img:nth-child(4)'); //4~8
  star1.addEventListener('click',function(){
    btn.style.backgroundColor = 'rgb(87 169 106)';
  });
  let star2 = starparent.querySelector('img:nth-child(5)'); //4~8
  star2.addEventListener('click',function(){
    btn.style.backgroundColor = 'rgb(87 169 106)';
  });
  let star3 = starparent.querySelector('img:nth-child(6)'); //4~8
  star3.addEventListener('click',function(){
    btn.style.backgroundColor = 'rgb(87 169 106)';
  });
  let star4 = starparent.querySelector('img:nth-child(7)'); //4~8
  star4.addEventListener('click',function(){
    btn.style.backgroundColor = 'rgb(87 169 106)';
  });
  let star5 = starparent.querySelector('img:nth-child(8)'); //4~8
  star5.addEventListener('click',function(){
    btn.style.backgroundColor = 'rgb(87 169 106)';
  });
  </script>

<% end %>